{"ast":null,"code":"import _slicedToArray from\"C:/Users/rd96/OneDrive/Desktop/Social Media Clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./Profile.scss\";import PlaceIcon from\"@mui/icons-material/Place\";import SchoolIcon from\"@mui/icons-material/School\";import Posts from\"../../components/Posts/Posts\";import{makeRequest}from\"../../axios\";import{useQuery,useMutation,useQueryClient}from\"@tanstack/react-query\";import{useLocation}from\"react-router-dom\";import\"./Profile.scss\";import{useContext,useState}from\"react\";import Update from\"../../components/Update/Update\";import{AuthContext}from\"../../context/authContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Profile=function Profile(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openUpdate=_useState2[0],setOpenUpdate=_useState2[1];var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser;// Extracting userId from the current URL path\nvar userId=parseInt(useLocation().pathname.split(\"/\")[2]);// Fetching user data using useQuery\nvar _useQuery=useQuery([\"user\"],function(){return makeRequest.get(\"/users/find/\"+userId).then(function(res){return res.data;});}),isLoading=_useQuery.isLoading,data=_useQuery.data;// Fetching relationship data using useQuery\nvar _useQuery2=useQuery([\"relationship\"],function(){return makeRequest.get(\"/relationships?followedId=\"+userId).then(function(res){return res.data;});}),risLoading=_useQuery2.isLoading,relationshipData=_useQuery2.data;var queryClient=useQueryClient();// Creating a mutation for follow/unfollow functionality\nvar mutation=useMutation(function(following){if(following)return makeRequest.delete(\"/relationships?userId=\"+userId);return makeRequest.post(\"/relationships\",{userId:userId});},{onSuccess:function onSuccess(){queryClient.invalidateQueries([\"relationship\"]);}});// Event handler for follow/unfollow button\nvar handleFollow=function handleFollow(){mutation.mutate(relationshipData.includes(currentUser.id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[isLoading?\"loading\":/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"images\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+data.coverPic,alt:\"\",className:\"coverphoto\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+data.profilePic,alt:\"\",className:\"profilephoto\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileinfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"userinfo\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"span\",{children:data.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(PlaceIcon,{}),/*#__PURE__*/_jsx(\"span\",{children:data.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(SchoolIcon,{}),/*#__PURE__*/_jsx(\"span\",{children:data.school})]})]}),risLoading?\"loading\":userId===currentUser.id?/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setOpenUpdate(true);},children:\"Update\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,children:relationshipData.includes(currentUser.id)?\"Following\":\"Follow\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right\"})]}),/*#__PURE__*/_jsx(Posts,{userId:userId})]})]}),openUpdate&&/*#__PURE__*/_jsx(Update,{setOpenUpdate:setOpenUpdate,user:data})]});};export default Profile;","map":{"version":3,"names":["PlaceIcon","SchoolIcon","Posts","makeRequest","useQuery","useMutation","useQueryClient","useLocation","useContext","useState","Update","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","_useState","_useState2","_slicedToArray","openUpdate","setOpenUpdate","_useContext","currentUser","userId","parseInt","pathname","split","_useQuery","get","then","res","data","isLoading","_useQuery2","risLoading","relationshipData","queryClient","mutation","following","delete","post","onSuccess","invalidateQueries","handleFollow","mutate","includes","id","className","children","src","coverPic","alt","profilePic","name","city","school","onClick","user"],"sources":["C:/Users/rd96/OneDrive/Desktop/Social Media Clone/client/src/pages/Profile/Profile.jsx"],"sourcesContent":["import \"./Profile.scss\";\r\nimport PlaceIcon from \"@mui/icons-material/Place\";\r\nimport SchoolIcon from \"@mui/icons-material/School\";\r\nimport Posts from \"../../components/Posts/Posts\";\r\nimport { makeRequest } from \"../../axios\";\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport \"./Profile.scss\";\r\nimport { useContext, useState } from \"react\";\r\nimport Update from \"../../components/Update/Update\";\r\nimport { AuthContext } from \"../../context/authContext\";\r\n\r\nconst Profile = () => {\r\n  const [openUpdate, setOpenUpdate] = useState(false);\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  // Extracting userId from the current URL path\r\n  const userId = parseInt(useLocation().pathname.split(\"/\")[2]);\r\n\r\n  // Fetching user data using useQuery\r\n  const { isLoading, data } = useQuery([\"user\"], () =>\r\n    makeRequest.get(\"/users/find/\" + userId).then((res) => {\r\n      return res.data;\r\n    })\r\n  );\r\n\r\n  // Fetching relationship data using useQuery\r\n  const { isLoading: risLoading, data: relationshipData } = useQuery(\r\n    [\"relationship\"],\r\n    () =>\r\n      makeRequest.get(\"/relationships?followedId=\" + userId).then((res) => {\r\n        return res.data;\r\n      })\r\n  );\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  // Creating a mutation for follow/unfollow functionality\r\n  const mutation = useMutation(\r\n    (following) => {\r\n      if (following)\r\n        return makeRequest.delete(\"/relationships?userId=\" + userId);\r\n      return makeRequest.post(\"/relationships\", { userId });\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries([\"relationship\"]);\r\n      },\r\n    }\r\n  );\r\n\r\n  // Event handler for follow/unfollow button\r\n  const handleFollow = () => {\r\n    mutation.mutate(relationshipData.includes(currentUser.id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {isLoading ? (\r\n        \"loading\"\r\n      ) : (\r\n        <>\r\n          <div className=\"images\">\r\n            <img\r\n              src={\"/upload/\" + data.coverPic}\r\n              alt=\"\"\r\n              className=\"coverphoto\"\r\n            />\r\n            <img\r\n              src={\"/upload/\" + data.profilePic}\r\n              alt=\"\"\r\n              className=\"profilephoto\"\r\n            />\r\n          </div>\r\n          <div className=\"profileinfo\">\r\n            <div className=\"userinfo\">\r\n              <div className=\"left\">{/* Left section content goes here */}</div>\r\n              <div className=\"center\">\r\n                <span>{data.name}</span>\r\n                <div className=\"info\">\r\n                  <div className=\"item\">\r\n                    <PlaceIcon />\r\n                    <span>{data.city}</span>\r\n                  </div>\r\n                  <div className=\"item\">\r\n                    <SchoolIcon />\r\n                    <span>{data.school}</span>\r\n                  </div>\r\n                </div>\r\n                {risLoading ? (\r\n                  \"loading\"\r\n                ) : userId === currentUser.id ? (\r\n                  <button onClick={() => setOpenUpdate(true)}>Update</button>\r\n                ) : (\r\n                  <button onClick={handleFollow}>\r\n                    {relationshipData.includes(currentUser.id)\r\n                      ? \"Following\"\r\n                      : \"Follow\"}\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"right\">{/* Right section content goes here */}</div>\r\n            </div>\r\n            <Posts userId={userId} />\r\n          </div>\r\n        </>\r\n      )}\r\n      {openUpdate && <Update setOpenUpdate={setOpenUpdate} user={data} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}